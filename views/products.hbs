<!DOCTYPE html>

<body>
  {{> main}}

  <div class="products-container">


  <video autoplay muted loop id="myVideo">
    <source src="/photos/vid.mp4" type="video/mp4">
  </video>

  <div class="grey-section">

  {{#each products}}

      <div class="new-product">

        <i id="arrow-left" class="fas fa-angle-left" onclick="plusDivs(-1, '{{id}}')"></i>

        <i id="arrow-right" class="fas fa-angle-right" onclick="plusDivs(+1, '{{id}}')"></i>

        <a class="product" href="/productpage/{{id}}">
          <img class="{{id}}" id="product-image" src="{{img1}}">
          <img class="{{id}}" id="product-image" src="{{img2}}">
          <img class="{{id}}" id="product-image" src="{{img3}}">
        </a>

        <div class="product-category">{{category}}</div>
        <div class="product-title">{{name}}</div>
        <i id="square" class="fas fa-square-full"></i>

        <div class="shop-button">Shop Jackets</div>


        <!-- <button class="arrow" onclick="plusDivs(-1, '{{id}}')">&#10094;</button> -->
        <!-- <button class="arrow" onclick="plusDivs(+1, '{{id}}')">&#10095;</button> -->

      </div>


  {{/each}}


  </div>

  </div>


  <div class="footer">
    <div>CAP TION B Â¿ CLOTHING</div>
    <div>EST 1986</div> 
  </div>



<script>

var decodedJson = decodeURIComponent("{{{encodedJson}}}");
var products = JSON.parse(decodedJson);
var numproducts = Object.keys(products).length;

console.log("hello?");
console.log(numproducts);

var indexMap = {};

for (var j=1; j<=numproducts; j++) {
  var currClass = products[j]["id"]; 
  indexMap[currClass] = 1;
  showDivs(indexMap[currClass], currClass);
  console.log(indexMap);
}
// showDivs(indexMap["a"], "a");
// showDivs(indexMap["b"], "b");
// 

// var slideIndexA = 1;
// var slideIndexB = 1;
// indexMap["a"] = slideIndexA;
// indexMap["b"] = slideIndexB;
// console.log(indexMap);

// for (var j=0; j<3; j++) {
// showDivs(indexMap["a"], "a");
// showDivs(indexMap["b"], "b");
// 

function plusDivs(dir, className) {
  // if (className == "a") { 
  //   slideIndexA += dir; 
  //   uniqueSlideIndex = slideIndexA; 
  // }
  // if (className == "b") { 
  //   slideIndexB += dir; 
  //   uniqueSlideIndex = slideIndexB; 
  // }
  showDivs(indexMap[className] += dir, className);
}

function showDivs(uniqueSlideIndex, className) {
  console.log(uniqueSlideIndex);
  var i; 
  var x = document.getElementsByClassName(className);
  if (uniqueSlideIndex > x.length) {
    console.log("aa");
    indexMap[className] = 1;
  }
  if (uniqueSlideIndex < 1) {
    console.log("bb");
    indexMap[className] = x.length;
  }
  for (i=0; i<x.length; i++) {
    x[i].style.display = "none";
  }
  console.log(uniqueSlideIndex);
  console.log(x[0]);
  console.log(x[1]);
  console.log(x[2]);
  console.log(x[3]);
  x[indexMap[className]-1].style.display = "block"; 
}


// var decodedJson = decodeURIComponent("{{{encodedJson}}}");
// var products = JSON.parse(decodedJson);
// var numproducts = Object.keys(products).length;

// console.log("zone");
// console.log(products);

// for (var m=0; m<numproducts; m++) { 
//   var slideIndex{{m}} = 1; 
//   // showDivs(1, slideIndex{{m}});
// }
// // showDivs(slideIndex);

// function plusDivs(n, id) {
//     var slideIndexValue = slideIndex{{id}} += n
//     console.log("uu");
//     console.log(slideIndex{{id}});
//     showDivs(slideIndex{{id}} += n, "product{{id}}");
// }

// function showDivs(n, a){
//   var i;
//   var x = document.getElementsByClassName(a);
//   if (n > x.length) {n = 1} 
//   if (n < 1) {n = x.length} ;
//   for (i = 0; i < x.length; i++) {
//     x[i].style.display = "none"; 
//   }
//   x[n-1].style.display = "block"; 
// }

// function showDivsugh(si) {
//     var i;
//     var x = document.getElementsByClassName("product1");
//     if (si > x.length) {slideIndex1 = 1}
//     if (si < 1) {si = x.length} ;
//     for (i = 0; i < x.length; i++) {
//         x[i].style.display = "none";
//     }
//     x[si-1].style.display = "block";

//     var y = document.getElementsByClassName("product2");
//     if (si > y.length) {slideIndex2 = 1}
//     if (si < 1) {si = y.length} ;
//     for (i = 0; i < y.length; i++) {
//         y[i].style.display = "none";
//     }
//     y[si-1].style.display = "block";
// }

// function showDivsEach(n) {
//     var slideIndex{{j}};
//     var i{{j}};
//     var x{{j}} = document.getElementsByClassName("product-image-2");
//     if (n > x{{j}}.length) {slideIndex = 1}
//     if (n < 1) {slideIndex = x{{j}}.length} ;
//     for (i = 0; i < x.length; i++) {
//         x[i].style.display = "none";
//     }
//     x[slideIndex-1].style.display = "block";
// }

</script>


</body>
